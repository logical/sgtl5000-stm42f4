This is an example of using a fe-pi audio board with an stm32f407.
The audio chip is an sgtl5000.
It was a little hard to figure out but I persisted.

The arduino audio driver was a big help by having working settings for the registers.
It may only work for this particular application but maybe it will help someone.
I prefer C++ for my firmware.

:-)
